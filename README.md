<div align="center">

# ğŸ›¡ï¸ PasarGuard

[![PasarGuard Logo](https://github.com/PasarGuard/docs/blob/main/logos/PasarGuard-black-logo.png)](https://github.com/PasarGuard/panel)

### Unified GUI Censorship Resistant Solution

</div>

<div align="center">

## ğŸ“Š Project Status

[![Build Status](https://img.shields.io/github/actions/workflow/status/PasarGuard/panel/build.yml?style=for-the-badge&label=Build&logo=github)](https://github.com/PasarGuard/panel/actions)
[![Docker Pulls](https://img.shields.io/docker/pulls/PasarGuard/panel?style=for-the-badge&label=Docker%20Pulls&logo=docker)](https://hub.docker.com/r/PasarGuard/panel)
[![License](https://img.shields.io/github/license/PasarGuard/panel?style=for-the-badge&label=License&logo=opensourceinitiative)](https://github.com/PasarGuard/panel/blob/main/LICENSE)
[![Telegram](https://img.shields.io/badge/Telegram-Group-2CA5E0?style=for-the-badge&logo=telegram&logoColor=white)](https://t.me/Pasar_Guard)
[![GitHub Stars](https://img.shields.io/github/stars/PasarGuard/panel?style=for-the-badge&label=Stars&logo=github)](https://github.com/PasarGuard/panel)

</div>

<div align="center">

## ğŸŒ Languages

[![English](https://img.shields.io/badge/English-ğŸ‡ºğŸ‡¸-blue?style=for-the-badge)](./README.md)
[![ÙØ§Ø±Ø³ÛŒ](https://img.shields.io/badge/ÙØ§Ø±Ø³ÛŒ-ğŸ‡®ğŸ‡·-green?style=for-the-badge)](./README-fa.md)
[![ç®€ä½“ä¸­æ–‡](https://img.shields.io/badge/ç®€ä½“ä¸­æ–‡-ğŸ‡¨ğŸ‡³-red?style=for-the-badge)](./README-zh-cn.md)
[![Ğ ÑƒÑÑĞºĞ¸Ğ¹](https://img.shields.io/badge/Ğ ÑƒÑÑĞºĞ¸Ğ¹-ğŸ‡·ğŸ‡º-orange?style=for-the-badge)](./README-ru.md)

</div>

<div align="center">

## ğŸ–¼ï¸ Preview

[![PasarGuard Dashboard Preview](https://github.com/PasarGuard/docs/raw/master/screenshots/preview.png)](https://github.com/PasarGuard/panel)

*Click to view larger image*

</div>

## ğŸ“‹ Table of Contents

-   [ğŸ“– Overview](#overview)
    -   [â“ Why using PasarGuard?](#why-using-PasarGuard)
        -   [âœ¨ Features](#features)
-   [ğŸš€ Installation guide](#installation-guide)
-   [âš™ï¸ Configuration](#configuration)
-   [ğŸ“š Documentation](#documentation)
-   [ğŸ”Œ API](#api)
-   [ğŸ’¾ Backup](#backup)
-   [ğŸ¤– Telegram Bot](#telegram-bot)
-   [ğŸ’» PasarGuard CLI](#PasarGuard-cli)
-   [ğŸŒ PasarGuard Node](#node)
-   [ğŸ”” Webhook notifications](#webhook-notifications)
-   [ğŸ’ Donation](#donation)
-   [ğŸ“„ License](#license)
-   [ğŸ‘¥ Contributors](#contributors)

# ğŸ“– Overview

<div align="center">

**PasarGuard** is a powerful proxy management tool that provides a simple and easy-to-use user interface for managing hundreds of proxy accounts. Built on [Xray-core](https://github.com/XTLS/Xray-core) and developed using Python and Reactjs.

</div>

## â“ Why using PasarGuard?

<div align="center">

PasarGuard is user-friendly, feature-rich and reliable. It lets you create different proxies for your users without any complicated configuration. Using its built-in web UI, you are able to monitor, modify and limit users.

</div>

### âœ¨ Features

<div align="center">

| ğŸ¯ **Core Features** | ğŸ”§ **Technical Features** | ğŸŒ **Protocol Support** |
|:---:|:---:|:---:|
| ğŸŒ Built-in **Web UI** | ğŸ”Œ Fully **REST API** backend | ğŸ“¡ **Vmess** Protocol |
| ğŸ“Š System monitoring | ğŸ—ï¸ [**Multiple Nodes**](#node) support | ğŸš€ **VLESS** Protocol |
| ğŸ“ˆ **Traffic statistics** | âš™ï¸ Customizable xray configuration | ğŸ›¡ï¸ **Trojan** Protocol |
| ğŸ”— **Subscription links** | ğŸ” **TLS** and **REALITY** support | ğŸŒ™ **Shadowsocks** Protocol |
| ğŸ“± **QRcode** generator | ğŸ¤– Integrated **Telegram Bot** | ğŸ”„ **Multi-protocol** support |
| ğŸ“… **Traffic limitations** | ğŸ’» Integrated **CLI** | ğŸ‘¥ **Multi-user** support |
| â° **Periodic limits** | ğŸŒ **Multi-language** | ğŸ”€ **Multi-inbound** support |
| ğŸ‘¨â€ğŸ’¼ **Multi-admin** support | ğŸ“¦ **Docker** ready | ğŸ¯ **Single port** fallbacks |

</div>

#### ğŸ¯ **Key Capabilities:**

- âœ… **Built-in Web UI**
- âœ… **Fully REST API** backend
- âœ… **[Multiple Nodes](#node)** support
- âœ… **Multi-protocol** for a single user
- âœ… **Multi-user** on a single inbound
- âœ… **Multi-inbound** on a **single port**
- âœ… **Traffic** and **expiry date** limitations
- âœ… **Periodic** traffic limit (daily, weekly, etc.)
- âœ… **Subscription link** compatible with **V2ray**, **Clash** and **ClashMeta**
- âœ… Automated **Share link** and **QRcode** generator
- âœ… System monitoring and **traffic statistics**
- âœ… Customizable xray configuration
- âœ… **TLS** and **REALITY** support
- âœ… Integrated **Telegram Bot**
- âœ… Integrated **Command Line Interface (CLI)**
- âœ… **Multi-language** support
- âœ… **Multi-admin** support (WIP)

# ğŸš€ Installation guide

<div align="center">

## âš ï¸ Warning

The following commands will install the pre-release versions (alpha/beta)

</div>

## ğŸ“¦ Install with SQLite Database

```bash
sudo bash -c "$(curl -sL https://github.com/PasarGuard/scripts/raw/main/pasarguard.sh)" @ install --pre-release
```

## ğŸ—„ï¸ Install with MySQL Database

```bash
sudo bash -c "$(curl -sL https://github.com/PasarGuard/scripts/raw/main/pasarguard.sh)" @ install --database mysql --pre-release
```

## ğŸ—ƒï¸ Install with MariaDB Database

```bash
sudo bash -c "$(curl -sL https://github.com/PasarGuard/scripts/raw/main/pasarguard.sh)" @ install --database mariadb --pre-release
```

## ğŸ˜ Install with PostgreSQL Database

```bash
sudo bash -c "$(curl -sL https://github.com/PasarGuard/scripts/raw/main/pasarguard.sh)" @ install --database postgresql --pre-release
```

## âœ… After Installation Complete

<div align="center">

### ğŸ“‹ Next Steps

</div>

- âœ… **Logs**: You will see the logs that you can stop watching them by closing the terminal or pressing `Ctrl+C`
- ğŸ“ **Files Location**: The PasarGuard files will be located at `/opt/pasarguard`
- âš™ï¸ **Configuration**: The configuration file can be found at `/opt/pasarguard/.env`
- ğŸ’¾ **Data Files**: The data files will be placed at `/var/lib/pasarguard`
- ğŸ”’ **Security**: For security reasons, the PasarGuard dashboard is not accessible via IP address
- ğŸŒ **SSL Required**: You must [obtain SSL certificate](https://PasarGuard.github.io/PasarGuard/en/examples/issue-ssl-certificate) and access your PasarGuard dashboard by opening a web browser and navigating to `https://YOUR_DOMAIN:8000/dashboard/`

### ğŸ”— Local Access via SSH

```bash
ssh -L 8000:localhost:8000 user@serverip
```

Then navigate to the following link in your browser:

```
http://localhost:8000/dashboard/
```

âš ï¸ **Note**: You will lose access to the dashboard as soon as you close the SSH terminal. Therefore, this method is recommended only for testing purposes.

### ğŸ‘¨â€ğŸ’¼ Create Admin

```bash
pasarguard cli admin create --sudo
```

### â“ Help

```bash
pasarguard --help
```

## ğŸ”§ Manual Install (Advanced)

<div align="center">

If you are eager to run the project using the source code, check the section below

</div>

<details markdown="1">
<summary><h3>ğŸ”§ Manual install (advanced)</h3></summary>

### ğŸš€ Step 1: Install Xray

```bash
bash -c "$(curl -L https://github.com/XTLS/Xray-install/raw/main/install-release.sh)" @ install
```

### ğŸ“¥ Step 2: Clone Project

```bash
git clone https://github.com/PasarGuard/panel.git
cd PasarGuard
curl -LsSf https://astral.sh/uv/install.sh | sh
uv sync
```

> **Note**: You need Python >= 3.12.7

### ğŸ—„ï¸ Step 3: Database Migration

```bash
uv run alembic upgrade head
```

### ğŸ’» Step 4: Install CLI

```bash
sudo ln -s $(pwd)/PasarGuard-cli.py /usr/bin/pasarguard-cli
sudo chmod +x /usr/bin/pasarguard-cli
pasarguard-cli completion install
```

### âš™ï¸ Step 5: Configuration

```bash
cp .env.example .env
nano .env
```

> ğŸ“– Check [configurations](#configuration) section for more information

### ğŸš€ Step 6: Run Application

```bash
uv run main.py
```

### ğŸ”§ Run with systemctl

```bash
systemctl enable /var/lib/pasarguard/PasarGuard.service
systemctl start PasarGuard
```

### ğŸŒ Nginx Configuration

```nginx
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name  example.com;

    ssl_certificate      /etc/letsencrypt/live/example.com/fullchain.pem;
    ssl_certificate_key  /etc/letsencrypt/live/example.com/privkey.pem;

    location ~* /(dashboard|statics|sub|api|docs|redoc|openapi.json) {
        proxy_pass http://0.0.0.0:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    # xray-core ws-path: /
    # client ws-path: /PasarGuard/me/2087
    #
    # All traffic is proxed through port 443, and send to the xray port(2087, 2088 etc.).
    # The '/PasarGuard' in location regex path can changed any characters by yourself.
    #
    # /${path}/${username}/${xray-port}
    location ~* /PasarGuard/.+/(.+)$ {
        proxy_redirect off;
        proxy_pass http://127.0.0.1:$1/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

### ğŸŒ Simple Nginx Configuration

```nginx
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name  PasarGuard.example.com;

    ssl_certificate      /etc/letsencrypt/live/example.com/fullchain.pem;
    ssl_certificate_key  /etc/letsencrypt/live/example.com/privkey.pem;

    location / {
        proxy_pass http://0.0.0.0:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

### ğŸŒ Dashboard Access

By default the app will be run on `http://localhost:8000/dashboard`. You can configure it using changing the `UVICORN_HOST` and `UVICORN_PORT` environment variables.

</details>

# âš™ï¸ Configuration

<div align="center">

You can set settings below using environment variables or placing them in `.env` file.

</div>

## ğŸ“‹ Configuration Variables Table

| Variable | Description |
|:---:|:---:|
| `SUDO_USERNAME` | Superuser's username |
| `SUDO_PASSWORD` | Superuser's password |
| `SQLALCHEMY_DATABASE_URL` | Database URL |
| `SQLALCHEMY_POOL_SIZE` | Pool size (default: 10) |
| `SQLALCHEMY_MAX_OVERFLOW` | Max overflow (default: 30) |
| `UVICORN_HOST` | Bind host (default: 0.0.0.0) |
| `UVICORN_PORT` | Bind port (default: 8000) |
| `UVICORN_UDS` | UNIX domain socket |
| `UVICORN_SSL_CERTFILE` | SSL certificate file |
| `UVICORN_SSL_KEYFILE` | SSL key file |
| `UVICORN_SSL_CA_TYPE` | CA type (default: public) |
| `XRAY_JSON` | Xray config file path |
| `CUSTOM_TEMPLATES_DIRECTORY` | Custom templates directory |
| `CLASH_SUBSCRIPTION_TEMPLATE` | Clash subscription template |
| `SUBSCRIPTION_PAGE_TEMPLATE` | Subscription page template |
| `XRAY_SUBSCRIPTION_TEMPLATE` | Xray subscription template |
| `SINGBOX_SUBSCRIPTION_TEMPLATE` | SingBox subscription template |
| `HOME_PAGE_TEMPLATE` | Home page template |
| `JWT_ACCESS_TOKEN_EXPIRE_MINUTES` | Token expire time (minutes) |
| `DOCS` | Show API docs |
| `DEBUG` | Debug mode |
| `USERS_AUTODELETE_DAYS` | Auto-delete expired users |
| `USER_AUTODELETE_INCLUDE_LIMITED_ACCOUNTS` | Include limited accounts |
| `XRAY_SUBSCRIPTION_PATH` | Subscription API path |
| `ENABLE_RECORDING_NODES_STATS` | Record node statistics |

# ğŸ“š Documentation

<div align="center">

The [PasarGuard Documentation](https://PasarGuard.github.io/PasarGuard) provides all the essential guides to get you started, available in three languages: Farsi, English, and Russian.

</div>

## ğŸ¤ Contributing to Documentation

This documentation requires significant effort to cover all aspects of the project comprehensively. We welcome and appreciate your contributions to help us improve it.

[Documentation GitHub Repository](https://github.com/PasarGuard/PasarGuard.github.io)

# ğŸ”Œ API

<div align="center">

PasarGuard provides a REST API that enables developers to interact with PasarGuard services programmatically.

</div>

## ğŸ“– View API Documentation

To view the API documentation in Swagger UI or ReDoc, set the configuration variable `DOCS=True` and navigate to the `/docs` and `/redoc`.

# ğŸ’¾ Backup

<div align="center">

## ğŸ”„ Automated Backup Service

It's always a good idea to backup your PasarGuard files regularly to prevent data loss in case of system failures or accidental deletion.

</div>

## ğŸ“‹ Backup Steps

1. **ğŸ“ Important Files**: By default, all PasarGuard important files are saved in `/var/lib/pasarguard`
2. **âš™ï¸ Configuration Files**: Make sure to backup your env file and Xray config file
3. **ğŸ“‚ Configuration Path**: If you installed PasarGuard using PasarGuard-scripts, configurations should be inside `/opt/pasarguard/` directory

## ğŸ¤– Telegram Backup Service

PasarGuard's backup service efficiently zips all necessary files and sends them to your specified Telegram bot.

### âœ¨ Features

- âœ… Supports SQLite, MySQL and MariaDB
- âœ… Automation with hourly backup scheduling
- âœ… No Telegram upload limits (large files are split)
- âœ… Immediate backup at any time

### ğŸš€ Installation & Setup

```bash
# Install latest PasarGuard script
sudo bash -c "$(curl -sL https://github.com/PasarGuard/scripts/raw/main/pasarguard.sh)" @ install-script

# Setup backup service
pasarguard backup-service

# Get immediate backup
pasarguard backup
```

## ğŸ’¡ Important Notes

- ğŸ”„ Update your backups regularly
- ğŸ“ Backup all data and configuration files
- ğŸ” Don't forget env files and Xray configuration

# ğŸ¤– Telegram Bot

<div align="center">

PasarGuard comes with an integrated Telegram bot that can handle server management, user creation and removal, and send notifications.

</div>

## âš™ï¸ Enable Telegram Bot

This bot can be easily enabled by following a few simple steps, and it provides a convenient way to interact with PasarGuard without having to log in to the server every time.

### ğŸ”§ Setup Steps

1. **ğŸ”‘ Set API Token**: Set `TELEGRAM_API_TOKEN` to your bot's API Token
2. **ğŸ‘¤ Set Admin ID**: Set `TELEGRAM_ADMIN_ID` to your Telegram account's numeric ID

### ğŸ“± Get Telegram ID

You can get your ID from [@userinfobot](https://t.me/userinfobot).

# ğŸ’» PasarGuard CLI

<div align="center">

PasarGuard comes with an integrated CLI named `PasarGuard-cli` which allows administrators to have direct interaction with it.

</div>

## ğŸš€ Using CLI

If you've installed PasarGuard using easy install script, you can access the cli commands by running:

```bash
pasarguard cli [OPTIONS] COMMAND [ARGS]...
```

## ğŸ“– CLI Documentation

For more information, You can read [PasarGuard CLI's documentation](./cli/README.md).

# ğŸ–¥ï¸ PasarGuard TUI

<div align="center">

PasarGuard also provides a Terminal User Interface (TUI) for interactive management directly within your terminal.

</div>

## ğŸš€ Using TUI

If you've installed PasarGuard using the easy install script, you can access the TUI by running:

```bash
pasarguard tui
```

## ğŸ“– TUI Documentation

For more information, you can read [PasarGuard TUI's documentation](./tui/README.md).

# ğŸŒ Node

<div align="center">

The PasarGuard project introduces the [node](https://github.com/PasarGuard/node), which revolutionizes infrastructure distribution.

</div>

## âœ¨ Node Benefits

With node, you can distribute your infrastructure across multiple locations, unlocking benefits such as:

- ğŸ”„ **Redundancy**
- âš¡ **High Availability**  
- ğŸ“ˆ **Scalability**
- ğŸ”§ **Flexibility**

## ğŸ¯ User Flexibility

node empowers users to connect to different servers, offering them the flexibility to choose and connect to multiple servers instead of being limited to only one server.

## ğŸ“– Node Documentation

For more detailed information and installation instructions, please refer to the [PasarGuard-node official documentation](https://github.com/PasarGuard/node)

# ğŸ”” Webhook notifications

<div align="center">

You can set a webhook address and PasarGuard will send the notifications to that address.

</div>

## ğŸ“¡ How it Works

The requests will be sent as a post request to the address provided by `WEBHOOK_ADDRESS` with `WEBHOOK_SECRET` as `x-webhook-secret` in the headers.

## ğŸ“‹ Example Request

```http
Headers:
Host: 0.0.0.0:9000
User-Agent: python-requests/2.28.1
Accept-Encoding: gzip, deflate
Accept: */*
Connection: keep-alive
x-webhook-secret: something-very-very-secret
Content-Length: 107
Content-Type: application/json

Body:
{"username": "PasarGuard_test_user", "action": "user_updated", "enqueued_at": 1680506457.636369, "tries": 0}
```

## ğŸ¯ Action Types

Different action types are: `user_created`, `user_updated`, `user_deleted`, `user_limited`, `user_expired`, `user_disabled`, `user_enabled`

# ğŸ’ Donation

<div align="center">

If you found PasarGuard useful and would like to support its development, you can make a donation.

</div>

## ğŸ¯ Support the Project

[Make a Donation](https://donate.gozargah.pro)

Thank you for your support!

# ğŸ“„ License

<div align="center">

Made in [Unknown!] and Published under [AGPL-3.0](./LICENSE).

</div>

# ğŸ‘¥ Contributors

<div align="center">

We â¤ï¸â€ğŸ”¥ contributors! If you'd like to contribute, please check out our [Contributing Guidelines](CONTRIBUTING.md) and feel free to submit a pull request or open an issue.

</div>

## ğŸ¤ Join the Community

We also welcome you to join our [Telegram](https://t.me/Pasar_Guard) group for either support or contributing guidance.

## ğŸ› Help Project Progress

Check [open issues](https://github.com/PasarGuard/panel/issues) to help the progress of this project.

<div align="center">

## ğŸ™ Thanks to Contributors

Thanks to the all contributors who have helped improve PasarGuard:

</div>

<div align="center">

<a href="https://github.com/PasarGuard/panel/graphs/contributors">
  <img src="https://contrib.rocks/image?repo=PasarGuard/panel" />
</a>

</div>

<div align="center">

Made with <a rel="noopener noreferrer" target="_blank" href="https://contrib.rocks">contrib.rocks</a>

</div>
